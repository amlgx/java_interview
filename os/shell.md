## linux常用的命令有哪些；

如何获取java进程的pid？

ps aux | grep xx | grep -v grep

3）如何获取某个进程的网络端口号；

4）如何实时打印日志；

5）如何统计某个字符串行数；

如何查看磁盘空间

查看大文件

## rm -rf * 了咋办，跑路吗？

- 命令替换为`mv`，写个定时shell清理。
- 目录删除制定权限。
- 先进入目录，然后加入 `&& rm -rf *`。
- 制定规范，先判断目录是否存在。 

## nohup和&有什么作用？

使用**&**后台运行程序：

- 结果会输出到终端
- 使用Ctrl + C发送SIGINT信号，程序免疫
- 关闭session发送SIGHUP信号，程序关闭

 使用**nohup**运行程序：

- 结果默认会输出到nohup.out
- 使用Ctrl + C发送SIGINT信号，程序关闭
- 关闭session发送SIGHUP信号，程序免疫

 **平日线上经常使用nohup和&配合来启动程序**：

- 同时免疫SIGINT和SIGHUP信号

 同时，还有一个最佳实践：

- 不要将信息输出到终端标准输出，标准错误输出，而要用日志组件将信息记录到日志里

## 磁盘满了，为啥du却显示还有很大空间？

删除了一个很大的正在写入的tomcat的access日志，会出现这种情况。

```
// disk usage, 累加文件大小
# du -sch
16G  /

// disk free, 通过文件系统检查剩余空间
# df -h
显示已用100%

// list open files, 列出文件
# lsof | grep deleted

// 删除日志文件的方式
# echo "" >access.log
```

如果用户删除了正在运行的程序打开的某文件，du返回减去后的容量，df要等到程序关闭这个文件，释放文件句柄后，才能真正释放存储空间。

所以，在tomcat删除大日志的时候，不要粗暴地`rm`，而是覆盖写入文件。

